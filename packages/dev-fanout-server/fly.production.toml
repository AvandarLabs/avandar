# Fly production config for `packages/dev-fanout-server`.

app = "avandar-dev-fanout-prod"
primary_region = "iad"

[build]
dockerfile = "./Dockerfile"

[env]

[http_service]
internal_port = 8080
force_https = true

# Keep one machine always running (webhook receiver; avoid cold starts).
auto_stop_machines = "off"
auto_start_machines = true
min_machines_running = 1

[[http_service.checks]]
interval = "15s"
timeout = "2s"
grace_period = "10s"
method = "GET"
path = "/healthz"

[[mounts]]
source = "data"
destination = "/data"
